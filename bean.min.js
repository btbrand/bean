/*!
  * event.js - copyright @dedfat
  * https://github.com/fat/bean
  * Follow our software http://twitter.com/dedfat
  * MIT License
  *///cheers to the entire mootools team, dean edwards, and dperini for lots of inspiration/guidance

!function(a){function v(a){var b=a.relatedTarget;if(b==null)return!0;if(!b)return!1;return b!=this&&b.prefix!="xul"&&!/document/.test(this.toString())&&!h(this,b)}function t(a){var b=a.type;a=a||{},a.preventDefault=t.preventDefault,a.stopPropagation=t.stopPropagation,a.target=a.target||a.srcElement,a.target.nodeType==3&&(a.target=a.target.parentNode);if(b.indexOf("key")!=-1)a.which&&(a.keyCode=a.which);else if(/click|mouse|menu/i.test(b)){a.rightClick=a.which==3||a.button==2,a.pos={x:0,y:0};if(a.pageX||a.pageY)a.pos.x=a.pageX,a.pos.y=a.pageY;else if(a.clientX||a.clientY)a.pos.x=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a.pos.y=a.clientY+document.body.scrollTop+document.documentElement.scrollTop;c.test(b)&&(a.relatedTarget=a.relatedTarget||a[(b=="mouseover"?"from":"to")+"Element"])}}function s(a,b,c){var d=i(b),e,f,g,h;if(!d)return a;f=c?d[c]:d,g=c?p:s;for(h in f)f.hasOwnProperty(h)&&g(a,c||b,c?f[h]:h);return a}function r(a,b){var c;if(u.indexOf(b)>-1){if(document.createEventObject){c=document.createEventObject();return a.fireEvent("on"+b,c)}c=document.createEvent("HTMLEvents"),c.initEvent(b,!0,!0);return!a.dispatchEvent(c)}a[d]?(c=document.createEvent("UIEvents"),c.initEvent(b,!1,!1),a.dispatchEvent(c)):a["_on"+b]++}function q(a,b,c){var d,e,f=typeof b=="string",g=o,h=i(a);if(!h||f&&!h[b])return a;if(typeof c=="function")g(a,b,c);else{b?(e=f&&b,b=c||h[b]||b):(b=h,g=q);for(d in b)b.hasOwnProperty(d)&&g(a,e||d,b[d])}return a}function p(a,b,c,d){if(typeof b=="object")for(var e in b)b.hasOwnProperty(e)&&n(a,e,b[e]);else{b=b.split(" ");for(var f=b.length;f--;)n(a,b[f],c,Array.prototype.slice.call(arguments,3))}return a}function o(a,b,c){var e=i(a);if(!e||!e[b])return a;c=e[b][c._uid],delete e[b][c._uid],b=w[b]?w[b].base:b,a[d]||u.indexOf(b)>-1?k(a,b,c,!1):k(a,"onpropertychange",c,!1,b);return a}function n(a,b,c,e){var f=i(a),g=f[b];g||(g=f[b]={},a["on"+b]&&(g[0]=a["on"+b]));var h=j(c);if(g[h])return a;var n=w[b];n&&(n.condition&&(c=m(a,c,b,n.condition)),b=n.base||b),a[d]||u.indexOf(b)>-1?(c=l(a,c,e),k(a,b,c,!0)):(c=m(a,c,b,!1,e),k(a,"onpropertychange",c,!0,b)),g[h]=c,c._uid=h;return a}function m(a,b,c,d,e){return function(f){(d?d.call(this,f):f.propertyName=="_"+c)&&b.apply(a,[f].concat(e));return!0}}function l(a,b,c){return function(d){d=d||t(((this.ownerDocument||this.document||this).parentWindow||window).event),b.apply(a,[d].concat(c))===!1&&d&&(d.preventDefault(),d.stopPropagation())}}function k(a,b,c,h,i){if(a[d])return a[h?d:f](b,c,!1);i&&(a["_on"+i]=a["_"+i]||0),a[h?e:g]("on"+b,c)}function j(a){return a._uid=a._uid||b++}function i(a){return a._events=a._events||{}}function h(a,b){var c=b.parentNode;while(c!=null){if(c==a)return!0;c=c.parentNode}return!1}var b=1,c=/over|out/,d="addEventListener",e="attachEvent",f="removeEventListener",g="detachEvent";t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0};var u="click,dblclick,mouseup,mousedown,contextmenu,mousewheel,DOMMouseScroll,mouseover,mouseout,mousemove,selectstart,selectend,keydown,keypress,keyup,orientationchange,touchstart,touchmove,touchend,touchcancel,gesturestart,gesturechange,gestureend,focus,blur,change,reset,select,submit,load,unload,beforeunload,resize,move,DOMContentLoaded,readystatechange,"+"error,abort,scroll".split(","),w={mouseenter:{base:"mouseover",condition:v},mouseleave:{base:"mouseout",condition:v},mousewheel:{base:navigator.userAgent.indexOf("Firefox")!=-1?"DOMMouseScroll":"mousewheel"}},x={add:p,remove:q,clone:s,fire:r},y=a.evnt;x.noConflict=function(){a.evnt=y;return this},a.evnt=x}(this)