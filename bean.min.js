/*!
  * event.js - copyright @dedfat
  * https://github.com/fat/bean
  * Follow our software http://twitter.com/dedfat
  * MIT License
  *///smooshing mootools eventy stuff and dean edwards eventy stuff

!function(a){function w(a){var b=a.relatedTarget;if(b==null)return!0;if(!b)return!1;return b!=this&&b.prefix!="xul"&&!/document/.test(this.toString())&&!d(this,b)}function u(a){var b=a.type;a=a||{},a.preventDefault=u.preventDefault,a.stopPropagation=u.stopPropagation,a.target=a.target||a.srcElement,a.target.nodeType==3&&(a.target=a.target.parentNode);if(b.indexOf("key")!=-1)a.which&&(a.keyCode=a.which);else if(/click|mouse|menu/i.test(b)){a.rightClick=a.which==3||a.button==2,a.pos={x:0,y:0};if(a.pageX||a.pageY)a.pos.x=a.pageX,a.pos.y=a.pageY;else if(a.clientX||a.clientY)a.pos.x=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a.pos.y=a.clientY+document.body.scrollTop+document.documentElement.scrollTop;c.test(b)&&(a.relatedTarget=a.relatedTarget||a[(b=="mouseover"?"from":"to")+"Element"])}}function t(a,b,c){var d=e(b),f,g,h;if(!d)return a;if(!c)for(f in d)t(a,b,f);else if(d[c]){g=d[c];for(h in g)o(a,c,g[h])}return a}function s(a,b,c){x[b]?m(a,b,c):i(a,b)}function r(a,b,c){var d,f,g,h,i;if(typeof b=="object"){for(i in b)b.hasOwnProperty(i)&&q(a,i,b[i]);return a}g=e(a);if(!g)return a;if(!b){for(d in g)r(a,d);g=null}else if(g[b])if(c)q(a,b,c);else{h=g[b];for(f in h)q(a,b,h[f]);delete g[b]}return a}function q(a,b,c){var d=e(a);if(!d||!d[b])return a;delete d[b][c._uid],x[b]&&!v[x[b].base]?l(a,b,c,arguments[3]):h(a,b,c,arguments[3]);return a}function p(a,b,c){if(typeof b=="object")for(var d in b)b.hasOwnProperty(d)&&o(a,d,b[d]);else o(a,b,c);return a}function o(a,b,c){var d=e(a),h=d[b];h||(h=d[b]={},a["on"+b]&&(h[0]=a["on"+b]));var i=f(c);if(h[i])return a;var l=x[b];l&&(l.condition&&(c=n(l,c)),b=l.base||b),v.indexOf(b)!=-1?(c=j(a,c),g(a,b,c)):k(a,b,c),h[i]=c,c._uid=i;return a}function n(a,b){return function(c){if(a.condition.call(this,c))return b.call(this,c);return!0}}function m(a,b){if(a.addEventListener){var c=document.createEvent("UIEvents");c.initEvent(b,!1,!1),a.dispatchEvent(fakeEvent)}else a["_on"+b]++}function l(a,b,c){a.addEventListener?a.removeEventListener(b,c,!1):a.detachEvent("onpropertychange",c)}function k(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):(a["_on"+b]=0,a.attachEvent("onpropertychange",function(d){d.propertyName=="_on"+b&&c.apply(a,arguments)}))}function j(a,b){return function(c){c=c||u(((this.ownerDocument||this.document||this).parentWindow||window).event),b.call(a,c)===!1&&(c.preventDefault(),c.stopPropagation())}}function i(a,b){var c;if(document.createEventObject){c=document.createEventObject();return a.fireEvent("on"+b,c)}c=document.createEvent("HTMLEvents"),c.initEvent(b,!0,!0);return!a.dispatchEvent(c)}function h(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c)}function g(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function f(a){return(a._uid=a._uid)||b++}function e(a){return(a._events=a._events)||{}}function d(a,b){var c=b.parentNode;while(c!=null){if(c==a)return!0;c=c.parentNode}return!1}var b=1,c=/over|out/;u.preventDefault=function(){this.returnValue=!1},u.stopPropagation=function(){this.cancelBubble=!0};var v=["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"],x={mouseenter:{base:"mouseover",condition:w},mouseleave:{base:"mouseout",condition:w},mousewheel:{base:navigator.userAgent.indexOf("Firefox")!=-1?"DOMMouseScroll":"mousewheel"}},y={add:p,remove:r,clone:t,fire:s},z=a.evnt;y.noConflict=function(){a.evnt=z;return this},a.evnt=y}(this)