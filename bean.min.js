/*!
  * event.js - copyright @dedfat
  * https://github.com/fat/bean
  * Follow our software http://twitter.com/dedfat
  * MIT License
  * cheers to the entire mootools team, dean edwards, and dperini
  */
!function(a){function A(a){var b=a.relatedTarget;if(b==null)return!0;if(!b)return!1;return b!=this&&b.prefix!="xul"&&!/document/.test(this.toString())&&!j(this,b)}function y(a){var b=a.type;a=a||{},a.preventDefault=y.preventDefault,a.stopPropagation=y.stopPropagation,a.target=a.target||a.srcElement,a.target.nodeType==3&&(a.target=a.target.parentNode);if(b.indexOf("key")!=-1)a.which&&(a.keyCode=a.which);else if(/click|mouse|menu/i.test(b)){a.rightClick=a.which==3||a.button==2,a.pos={x:0,y:0};if(a.pageX||a.pageY)a.pos.x=a.pageX,a.pos.y=a.pageY;else if(a.clientX||a.clientY)a.pos.x=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a.pos.y=a.clientY+document.body.scrollTop+document.documentElement.scrollTop;e.test(b)&&(a.relatedTarget=a.relatedTarget||a[(b=="mouseover"?"from":"to")+"Element"])}}function x(a,b,c){var d=m(b),e,f,g,h;if(!d)return a;f=c?d[c]:d,g=c?u:x;for(h in f)f.hasOwnProperty(h)&&g(a,c||b,c?f[h]:h);return a}function w(a,b){var c,d,e,g=b.split(" ");for(e=g.length;e--;){b=g[e];if(!l(a)){var h=m(a)[b];for(d in h)h.hasOwnProperty(d)&&h[d]()}z.indexOf(b)>-1?document.createEventObject?(c=document.createEventObject(),a.fireEvent("on"+b,c)):(c=document.createEvent("HTMLEvents"),c.initEvent(b,!0,!0),a.dispatchEvent(c)):a[f]?(c=document.createEvent("UIEvents"),c.initUIEvent(b,!0,!0,window,1),a.dispatchEvent(c)):a["_on"+b]++}return a}function v(a,b,c){var d,e,f=typeof b=="string",g=s,h=m(a);if(f&&/\s/.test(b)){var b=b.split(" ");for(var i=b.length;i--;)v(a,b[i]);return a}if(!h||f&&!h[b])return a;if(typeof c=="function")g(a,b,c);else{b?(e=f&&b,b=c||h[b]||b):(b=h,g=v);for(d in b)b.hasOwnProperty(d)&&g(a,e||d,b[d])}return a}function u(a,b,c,d,e){if(typeof b=="object"&&!c)for(var f in b)b.hasOwnProperty(f)&&r(a,f,b[f]);else{var g=typeof c=="string",h=(g?c:b).split(" ");for(var i=h.length;i--;)r(a,h[i],g?t(b,d,e):c,Array.prototype.slice.call(arguments,g?4:3))}return a}function t(a,b,c){return function(d){var e=typeof a=="string"?c(a,this):a;for(var f=d.target;f&&f!=this;f=f.parentNode)for(var g=e.length;g--;)if(e[g]==f)return b.apply(f,arguments)}}function s(a,b,c){var d=m(a);if(!d||!d[b])return a;c=d[b][c._uid],delete d[b][c._uid],b=B[b]?B[b].base:b,a[f]||z.indexOf(b)>-1?o(a,b,c,!1):o(a,"onpropertychange",c,!1,b);return a}function r(a,b,c,e){var g=m(a),h=g[b];h||(h=g[b]={},a["on"+b]&&(h[0]=a["on"+b]));var i=n(c);if(h[i])return a;var j=B[b];j&&(j.condition&&(c=q(a,c,b,j.condition)),b=j.base||b);if(a[f]||z.indexOf(b)>-1){c=p(a,c,e);if(b=="unload"){var k=c;c=function(){s(a,"unload",c),k()}}o(a,b,c,!0)}else c=q(a,c,b,!1,e),o(a,"onpropertychange",c,!0,b);h[i]=c,c._uid=i;return b=="unload"?a:d[n(a)]=a}function q(a,b,c,d,e){return function(f){(d?d.call(this,f):f&&f.propertyName=="_"+c||1)&&b.apply(a,[f].concat(e));return!0}}function p(a,b,c){return function(d){d=d||y(((this.ownerDocument||this.document||this).parentWindow||window).event),b.apply(a,[d].concat(c))===!1&&d&&(d.preventDefault(),d.stopPropagation())}}function o(a,b,c,d,e){if(!!l(a)){if(a[f])return a[d?f:h](b,c,!1);e&&(a["_on"+e]=a["_"+e]||0),a[d?g:i]("on"+b,c)}}function n(a){return a._uid=a._uid||b++}function m(a){var b=n(a);return c[b]=c[b]||{}}function l(a){return!!a.nodeName}function j(a,b){var c=b.parentNode;while(c!=null){if(c==a)return!0;c=c.parentNode}return!1}var b=1,c={},d={},e=/over|out/,f="addEventListener",g="attachEvent",h="removeEventListener",i="detachEvent";y.preventDefault=function(){this.returnValue=!1},y.stopPropagation=function(){this.cancelBubble=!0};var z="click,dblclick,mouseup,mousedown,contextmenu,mousewheel,DOMMouseScroll,mouseover,mouseout,mousemove,selectstart,selectend,keydown,keypress,keyup,orientationchange,touchstart,touchmove,touchend,touchcancel,gesturestart,gesturechange,gestureend,focus,blur,change,reset,select,submit,load,unload,beforeunload,resize,move,DOMContentLoaded,readystatechange,"+"error,abort,scroll".split(","),B={mouseenter:{base:"mouseover",condition:A},mouseleave:{base:"mouseout",condition:A}},C={add:u,remove:v,clone:x,fire:w},D=function(a){var b=a._uid;v(a),b&&(delete d[b],delete c[b])};window[g]&&u(window,"unload",function(){for(k in d)d.hasOwnProperty(k)&&D(d[k]);window.CollectGarbage&&CollectGarbage()});var E=a.evnt;C.noConflict=function(){a.evnt=E;return this},a.evnt=C}(this)