/*!
  * bean.js - copyright @dedfat
  * https://github.com/fat/bean
  * Follow our software http://twitter.com/dedfat
  * MIT License
  * special thanks to:
  * dean edwards: http://dean.edwards.name/
  * dperini: https://github.com/dperini/nwevents
  * the entire mootools team: github.com/mootools/mootools-core
  */
!function(a){function z(a){var b=a.relatedTarget;if(!b)return b==null;return b!=this&&b.prefix!="xul"&&!/document/.test(this.toString())&&!k(this,b)}function x(a){if(!a)return{};var b=a.type,c=a.target||a.srcElement;a.preventDefault=a.preventDefault||x.preventDefault,a.stopPropagation=a.stopPropagation||x.stopPropagation,a.target=c&&c.nodeType==3?c.parentNode:c;if(b.indexOf("key")!=-1)a.keyCode=a.which||a.keyCode;else if(/click|mouse|menu/i.test(b)){a.rightClick=a.which==3||a.button==2,a.pos={x:0,y:0};if(a.pageX||a.pageY)a.pos.x=a.pageX,a.pos.y=a.pageY;else if(a.clientX||a.clientY)a.pos.x=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a.pos.y=a.clientY+document.body.scrollTop+document.documentElement.scrollTop;e.test(b)&&(a.relatedTarget=a.relatedTarget||a[(b=="mouseover"?"from":"to")+"Element"])}return a}function w(a,b,c){var d=l(b),e,f;e=c?d[c]:d;for(f in e)e.hasOwnProperty(f)&&(c?t:w)(a,c||b,c?e[f]:f);return a}function v(b,c){var d,e,f,i=c.split(" ");for(f=i.length;f--;){c=i[f].replace(/\..*/,"");var j=y.indexOf(c)>-1,k=i[f].replace(k,""),m=l(b)[c];if(k)m[k]&&m[k]();else if(b[g])d=document.createEvent(j?"HTMLEvents":"UIEvents"),d[j?"initEvent":"initUIEvent"](c,!0,!0,a,1),b.dispatchEvent(d);else if(b[h])j?b.fireEvent("on"+c,document.createEventObject()):b["_on"+c]++;else for(e in m)m.hasOwnProperty(e)&&m[e]()}return b}function u(a,b,c){var d,e,f=typeof b=="string",g=r,h=l(a);if(f&&/\s/.test(b)){b=b.split(" ");var i=b.length-1;while(u(a,b[i])&&i--);return a}if(!h||f&&!h[b])return a;if(typeof c=="function")g(a,b,c);else{g=b?g:u,e=f&&b,b=b?c||h[b]||b:h;for(d in b)b.hasOwnProperty(d)&&g(a,e||d,b[d])}return a}function t(a,b,c,d,e){if(typeof b=="object"&&!c)for(var f in b)b.hasOwnProperty(f)&&t(a,f,b[f]);else{var g=typeof c=="string",h=(g?c:b).split(" ");c=g?s(b,d,e):c;for(var i=h.length;i--;)q(a,h[i],c,Array.prototype.slice.call(arguments,g?4:3))}return a}function s(a,b,c){return function(d){var e=typeof a=="string"?c(a,this):a;for(var f=d.target;f&&f!=this;f=f.parentNode)for(var g=e.length;g--;)if(e[g]==f)return b.apply(f,arguments)}}function r(a,b,c){var d=l(a);if(!d||!d[b])return a;c=d[b][c._uid],delete d[b][c._uid],b=A[b]?A[b].base:b;var e=a[g]||y.indexOf(b)>-1;n(a,e?b:"propertychange",c,!1,!e&&b);return a}function q(b,c,e,h){var i=c.replace(/\..*/,""),j=l(b),k=j[i]||(j[i]={}),q=m(e,c.replace(f,""));if(k[q])return b;var s=A[i];e=s&&s.condition?p(b,e,i,s.condition):e,i=s&&s.base||i;var t=a[g]||y.indexOf(i)>-1;e=t?o(b,e,h):p(b,e,i,!1,h);if(i=="unload"){var u=e;e=function(){r(b,i,e)&&u()}}n(b,t?i:"propertychange",e,!0,!t&&!0),k[q]=e,e._uid=q;return i=="unload"?b:d[m(b)]=b}function p(a,b,c,d,e){return function(f){(d?d.call(this,f):f&&f.propertyName=="_on"+c||!f)&&b.apply(a,[f].concat(e))}}function o(b,c,d){return function(e){e=x(e||((this.ownerDocument||this.document||this).parentWindow||a).event);return c.apply(b,[e].concat(d))}}function n(a,b,c,d,e){a[g]?a[d?g:i](b,c,!1):a[h]&&(e&&d&&(a["_on"+e]=a["_on"+e]||0),a[d?h:j]("on"+b,c))}function m(a,c){return a._uid=c||a._uid||b++}function l(a){var b=m(a);return c[b]=c[b]||{}}function k(a,b){var c=b.parentNode;while(c!=null){if(c==a)return!0;c=c.parentNode}}var b=1,c={},d={},e=/over|out/,f=/.*(?=\..*)\.|.*/,g="addEventListener",h="attachEvent",i="removeEventListener",j="detachEvent";x.preventDefault=function(){this.returnValue=!1},x.stopPropagation=function(){this.cancelBubble=!0};var y="click,dblclick,mouseup,mousedown,contextmenu,mousewheel,DOMMouseScroll,mouseover,mouseout,mousemove,selectstart,selectend,keydown,keypress,keyup,orientationchange,touchstart,touchmove,touchend,touchcancel,gesturestart,gesturechange,gestureend,focus,blur,change,reset,select,submit,load,unload,beforeunload,resize,move,DOMContentLoaded,readystatechange,"+"error,abort,scroll".split(","),A={mouseenter:{base:"mouseover",condition:z},mouseleave:{base:"mouseout",condition:z},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}},B={add:t,remove:u,clone:w,fire:v},C=function(a){var b=u(a)._uid;b&&(delete d[b],delete c[b])};a[h]&&t(a,"unload",function(){for(var b in d)d.hasOwnProperty(b)&&C(d[b]);a.CollectGarbage&&CollectGarbage()});var D=a.bean;B.noConflict=function(){a.bean=D;return this},typeof module!="undefined"&&module.exports?module.exports=B:a.bean=B}(this)